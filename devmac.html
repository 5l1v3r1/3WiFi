<title>3WiFi: Имя устройства по MAC</title>

<head>
<script type="text/javascript">
function detect()
{
	var formdata = $($('form')[0]).serialize();
	$('input').prop('disabled', true);
	$('button').prop('disabled', true);
	$('#fdata').empty();
	$('#fhead').empty();
	$('#fhead').append('<tr><th>Device Name</th><th>Probability</th></tr>');
	$('#fdata').append('<tr><td colspan=2><img src="img/loading.gif"></td></tr>');

	$.post('3wifi.php?a=devicemac', formdata, function(d)
	{
		$('input').prop('disabled', false);
		$('button').prop('disabled', false);
		if (!d.result)
		{
			$('#fdata > tr:first-child > :first-child').text('Ошибка загрузки данных.');
			return;
		}
		if (!d.auth)
		{
			$('#fdata > tr:first-child > :first-child').text('Не авторизован.');
			return;
		}
		if (d.scores.length > 0)
		{
			$('#fdata').empty();
			for (var i = 0; i < d.scores.length; i++)
			{
				$('#fdata').append('<tr><td>'+d.scores[i].name+'</td><td style="text-align: left"><span class=perc></span><b>&nbsp; '+Math.round(d.scores[i].score * 100)+'%</b></td></tr>');
				var perc = $('.perc:last');
				var wid = 180;
				perc.css('width', wid + 'px');
				var chld = $('<span class=perc-data>');
				chld.css('width', Math.round(d.scores[i].score * 100) + '%');
				perc.html(chld);
			}
		} else {
			$('#fdata > tr:first-child > :first-child').text('Таких устройств в базе нет.');
		}
	}).fail(function(jqXHR, textStatus, errorThrown) {
		$('#fdata > tr:first-child > :first-child').text('Ошибка загрузки данных.');
		$('input').prop('disabled', false);
		$('button').prop('disabled', false);
	});
}
function initpage()
{
	$('.content').css('padding-top', '0px');
}
</script>
</head>

<body>
<p>Данный инструмент позволяет приблизительно определить изготовителя и модель устройства по его BSSID / MAC-адресу. Сопоставление производится на основе данных, собранных Router Scan.</p>
<form id=fdeviceform enctype="multipart/form-data" method="POST" onsubmit="detect(); return false">
<table>
	<tbody>
		<tr><td>BSSID / MAC:</td><td><input name="bssid" type="text" value="" pattern="([0-9A-Fa-f]{2}[:-]?){5}[0-9A-Fa-f]{2}" autofocus /></td><td> (в формате <tt>00:11:22:33:44:55</tt>)</td></tr>
	</tbody>
	<tbody>
		<tr><td><input type=submit value="Определить" /></td><td></td></tr>
	</tbody>
</table>
</form>
</br>
<table class=st1>
	<tbody id=fhead></tbody>
	<tbody id=fdata></tbody>
</table>
</body>